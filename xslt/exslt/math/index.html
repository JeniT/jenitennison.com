<?xml version="1.0">
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "/resources/dtd/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml">
   <head>
      <title>Extensions to XSLT 1.0 (EXSLT 1.0) - Math</title>
      <link rel="stylesheet" href="/resources/style/base.css"/>
      <link rel="alternate" type="text/xml" href="/index.xml"/>
     <style>
      .issue { margin-left: 5%; }
      .error { color: red; }
      .function { font-weight: bolder; }
      .element { font: 'Courier New', Courier, monospace;
                 font-size: 0.8em; }
     </style>
   </head>
   <body>
      <h1>Extensions to XSLT 1.0 (EXSLT 1.0) - Math</h1>
      <p>
         This version: <a href="http://www.jenitennison.com/xslt/exslt/math/exslt-math-010310.html">exslt-math-010310.html</a><br />
         Most Recent version: <a href="http://www.jenitennison.com/xslt/exslt/math/">http://www.jenitennison.com/xslt/exslt/math/</a><br />
         Previous version: <a href="http://www.jenitennison.com/xslt/exslt/math/exslt-math-010302.html">exslt-math-010302.html</a><br />
         Author: <a href="mailto:mail@jenitennison.com">Jeni Tennison</a>
      </p>
      <h3>Abstract</h3>
      <p>
         This document describes EXSLT 1.0 - Math.  EXSLT 1.0 is a set of extension elements and functions that XSLT authors may find helpful when creating stylesheets.  EXSLT 1.0 - Math covers those extension elements and functions that provide facilities to do with maths.
      </p>
      <p>
         Other parts of EXSLT 1.0 include:
      </p>
      <ul>
         <li><a href="http://www.jenitennison.com/xslt/exslt/common/">EXSLT 1.0 - Common</a></li>
         <li><a href="http://www.jenitennison.com/xslt/exslt/sets/">EXSLT 1.0 - Sets</a></li>
         <li><a href="http://www.jenitennison.com/xslt/exslt/functions/">EXSLT 1.0 - Functions</a></li>
      </ul>

      <h3>Status of this Document</h3>

      <p>
         This document is a second draft for review by the implementers of XSLT processors and the XSLT stylesheet authors.  It is based on discussions on <a class="offsite" href="http://www.mulberrytech.com/xsl/xsl-list">XSL-List</a>.  Comments on this document should be sent to <a href="mailto:xsl-list@mulberrytech.com">XSL-List</a>.
      </p>
      <p>
         This document has no official standing and has not been considered nor approved by any organization.
      </p>

      <h3>Contents</h3>
      <p>
         1. <a href="#introduction">Introduction</a><br />
         2. <a href="#namespace">Namespace</a><br />
         3. <a href="#functions">Math Functions</a><br />
      </p>

      <h4>Appendices</h4>
      <p>
         A. <a href="#references">References</a><br />
         B. <a href="#samples">Implementations in EXSLT</a><br />
         C. <a href="#acknowledgements">Acknowledgements</a><br />
         D. <a href="#changes">Changes from Previous Version</a><br />
      </p>

      <h2 id="introduction">1. Introduction</h2>

      <p>
         This document describes EXSLT 1.0 - Math.  EXSLT 1.0 is a set of extension elements and functions that XSLT authors may find helpful when creating stylesheets.  EXSLT 1.0 - Math covers those extension elements and functions that provide facilities to do with maths.
      </p>
      <p>
         The extension elements and functions defined within this document are governed by the general rules about extensions to XSLT covered in [<a class="offsite" href="http://www.w3.org/TR/xslt#extension">14. Extensions</a>] in [<a href="#reference-XSLT">XSLT 1.0</a>].
      </p>
      <p>
         XSLT processors are free to support any number of the extension elements and functions described in this document.  However, an XSLT processor must not claim to support EXSLT 1.0 - Math unless all the extensions described within this document are implemented by the processor.  An implementation of an extension element or function in an EXSLT namespace must conform to the behaviour described in this document.
      </p>

      <h2 id="namespace">2. Namespace</h2>

      <p>
         The namespace for the extension elements and functions described in this document is:
      </p>
      <pre>
http://xmlns.opentechnology.org/xslt-extensions/math
      </pre>
      <p>
         Throughout this document, the prefix <code>math</code> is used to refer to this namespace. Any other prefix can be used within a particular stylesheet (though a prefix must be specified to enable the extension functions to be recognised as extensions).
      </p>

      <h2 id="functions">3. Math Functions</h2>

      <p>
         This section defines the extension functions in EXSLT 1.0 - Math.
      </p>

      <p id="function-math:max">
         <b>Function:</b> <var>number</var> <b>math:max</b>(<var>node-set</var>)
      </p>
      <p>
         The <span class="function">math:max</span> function returns the maximum, for each node in the argument node-set, of the result of converting the string-values of the node to a number using the <a href="http://www.w3.org/TR/xpath#function-number" class="function offsite">number</a> function.  The numbers are compared as with the <code>></code> operator.  If the node set is empty, <code>NaN</code> is returned.
      </p>

      <p id="function-math:min">
         <b>Function:</b> <var>number</var> <b>math:min</b>(<var>node-set</var>)
      </p>
      <p>
         The <span class="function">math:min</span> function returns the maximum, for each node in the argument node-set, of the result of converting the string-values of the node to a number using the <a href="http://www.w3.org/TR/xpath#function-number" class="function offsite">number</a> function.  The numbers are compared as with the <code>&lt;</code> operator.  If the node set is empty, <code>NaN</code> is returned.
      </p>
      <p id="function-math:highest">
         <b>Function:</b> <var>node-set</var> <b>math:highest</b>(<var>node-set</var>)
      </p>
      <p>
         The <span class="function">math:highest</span> function returns the nodes for which the result of converting the string-value of the node to a number is maximum value for the node set, as calculated with <a href="#function-math:max">math:max</a>.
      </p>
      <p id="function-math:lowest">
         <b>Function:</b> <var>node-set</var> <b>math:lowest</b>(<var>node-set</var>)
      </p>
      <p>
         The <span class="function">math:lowest</span> function returns the nodes for which the result of converting the string-value of the node to a number is minimum value for the node set, as calculated with <a href="#function-math:min">math:min</a>.
      </p>

      <h2 id="references">A. References</h2>
      
      <dl>
         <dt id="reference-exslt-common"><b>EXSLT Common</b></dt>
         <dd>Jeni Tennison. <i>Extensions to XSLT 1.0 (EXSLT 1.0) - Common</i>.  See <a href="http://www.jenitennison.com/xslt/exslt/common">http://www.jenitennison.com/xslt/exslt/common</a></dd>
         <dt id="reference-XSLT"><b>XSLT</b></dt>
         <dd>World Wide Web Consortium. <i>XSL Transformations (XSLT)</i>. W3C Recommendation. See <a class="offsite" href="http://www.w3.org/TR/xslt">http://www.w3.org/TR/xslt</a></dd>
         <dt id="reference-XPath"><b>XPath</b></dt>
         <dd>World Wide Web Consortium. <i>XML Path Language</i>. W3C Recommendation. See <a class="offsite" href="http://www.w3.org/TR/xpath">http://www.w3.org/TR/xpath</a></dd>
      </dl>
      
      <h2 id="samples">B. Sample Extension Functions</h2>

      <p>
         This appendix holds example implementations of the functions defined in this document, using <a href="http://www.jenitennison.com/xslt/exslt/common/#element-function"><code>exsl:function</code></a> as described in [<a href="#reference-exslt-common">EXSLT Common</a>].
      </p>

      <p>
         <b>Function:</b> <var>number</var> <b>math:max</b>(<var>node-set</var>, <var>string</var>?)
      </p>
      <pre>
&lt;exsl:function name="math:max">
   &lt;xsl:param name="node-set" select="/.." />
   &lt;exsl:result select="number($node-set[not($node-set > .)])" />
&lt;/exsl:function>
      </pre>
      <p>
         <b>Function:</b> <var>number</var> <b>math:min</b>(<var>node-set</var>, <var>string</var>?)
      </p>
      <pre>
&lt;exsl:function name="math:min">
   &lt;xsl:param name="node-set" select="/.." />
   &lt;exsl:result select="number($node-set[not($node-set &amp;lt; .)])" />
&lt;/exsl:function>
      </pre>
      <p>
         <b>Function:</b> <var>node-set</var> <b>math:highest</b>(<var>node-set</var>, <var>string</var>?)
      </p>
      <pre>
&lt;exsl:function name="math:highest">
   &lt;xsl:param name="node-set" select="/.." />
   &lt;exsl:result select="$node-set[not($node-set > .)]" />
&lt;/exsl:function>
      </pre>
      <p>
         <b>Function:</b> <var>node-set</var> <b>math:lowest</b>(<var>node-set</var>, <var>string</var>?)
      </p>
      <pre>
&lt;exsl:function name="math:lowest">
   &lt;xsl:param name="node-set" select="/.." />
   &lt;exsl:result select="$node-set[not($node-set &amp;lt; .)]" />
&lt;/exsl:function>
      </pre>

      <h2 id="acknowledgements">C. Acknowledgements</h2>

      <p>
         This document describes functions that are currently in use in <a href="http://users.iclway.co.uk/mhkay/saxon" class="offsite">Saxon</a> by Mike Kay.  It has also been informed and inspired by discussions on <a class="offsite" href="http://www.mulberrytech.com/xsl/xsl-list">XSL-List</a>.
      </p>
      <p>
         Also many thanks to Uche Ogbuji for his comments following implementation of these functions in <a href="http://www.fourthought.com" class="offsite">4XSLT</a>.
      </p>

      <h2 id="changes">D. Changes from Previous Version</h2>

      <ul>
         <li>Changed the prefix used in this document from '<code>num</code>' to '<code>math</code>'.</li>
         <li>Changed wording on conformance in the <a href="#introduction">Introduction</a>.</li>
         <li>Removed arguments that require dynamic evaluation.</li>
         <li>Removed math:sum function as without dynamic evaluation, this is already supported in XSLT.</li>
         <li>Changed wording on <a href="#function-math:max" class="function">math:max</a>, <a href="#function-math:min" class="function">math:min</a>, <a href="#function-math:highest" class="function">math:highest</a> and <a href="#function-math:lowest" class="function">math:lowest</a> to indicate that the node values are converted to numbers as with the <a href="http://www.w3.org/TR/xpath#function-number" class="function offsite">number</a> function.</li>
      </ul>

   </body>
</html>